:ruby
  Markdown = import("../Markdown")
%article
  %Markdown
    :plain
      # Data fetching

      This has nothing to do with Haml but I suppose this document will turn into
      some proper documentation at some point, so I'm writing it here...

      ```haml
      :ruby
        def self.get_initial_state(**)
          {
            result: nil,
            error: nil,
          }
        end
        def mount
          sleep 1
          res = helpers.fetch("https://pokeapi.co/api/v2/pokemon/#{props[:id]}")
          result = res.json(symbolize_names: true)
          update(result:)
        rescue => e
          update(error: e.message)
        end
      :ruby
        state => { error:, result: }
      - if error
        - return
          %p.error= error
      - unless result
        - return
          %p Loading...
      %p= result[:name]
      ```
