initial_state do |props|
  { count: 0 }
end

handler :increment do |x, prev|
  update do |state|
    { count: state[:count].next }
  end
end

should_update? do |next_props, next_state|
  super(next_props, next_state)
end

render do
  count = state[:count]

  <div>
    <button on-click={handler(:increment, count)}>
      Click me! {count}
    </button>
  </div>
end
